
:javascript 
  function checkForComment() {  comment_text = document.getElementsByName('comment_text_box').item(0).value; document.getElementById('submit_button').disabled = comment_text.replace(/^\s+|\s+$/g, '') == ""; } 
    

= stylesheet_link_tag 'editor'

%h3
  = @publication.title

- form_for :comment, Comment.new(:publication_id => @publication_id, :identifier_id => @identifier_id, :reason => "general"), :url => { :controller => "comments", :action => "create" } do |form|
  = form.hidden_field :publication_id
  = form.hidden_field :identifier_id 
  = form.hidden_field :reason
  = form.text_field :comment,  :name => "comment_text_box", :onkeyup => "checkForComment(event)"
  = form.hidden_field :reason
  = form.submit "Add Comment", :disabled => true, :id => "submit_button"

- for comment in @comments
  = render :partial => comment



