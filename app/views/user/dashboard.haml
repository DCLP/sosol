#main.site
  = render :partial => "common/flash_all"
  %h2 Your Publications
  = render :partial => "publications/list", :object => @publications.collect{|p| p.status.nil? ? p : nil}.compact
  - statuses = @publications.collect{|p| p.status}.uniq.compact.sort_by{|s| ["new","editing","submitted","approved","finalizing"].index(s)}
  - for status in statuses
    %br
    %h3== Your #{status} publications
    = render :partial => "publications/list", :object => @publications.collect{|p| p.status == status ? p : nil}.compact
  %br
  = render :partial => "publications/publication_selector"
  %br
  - form_for :publication, Publication.new, :url => { :controller => "publications", :action => "create" } do |form|
    = label_tag 'pn_id', 'Create publication from PN ID:'
    = text_field_tag 'pn_id', '', :size => 40
    = form.submit "Create", :class => ''
  %br
  - form_for :publication, Publication.new, :url => { :controller => "publications", :action => "create_from_templates" } do |form|
    = form.submit "Create New Publication", :class => 'save'
  %br
  - if @current_user.boards.length > 0
    %h2
      Boards
    - @current_user.boards.each do |board|
      - if board.publications.length > 0
        %h2== #{board.title} Publications
        = render :partial => "publications/list", :object => board.publications
        %br
  %h2 News Feed
  = render :partial => "events/list", :object => @events
